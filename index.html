<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å•†å“ç¸½è¦½ - LIFF æ¸¬è©¦ç‰ˆ</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .product { border-bottom: 1px solid #ddd; padding: 10px 0; }
    .actions { margin-top: 20px; }
  </style>
</head>
<body>
  <h2>å•†å“ç¸½è¦½ï¼ˆæ¸¬è©¦ï¼‰</h2>
  <div id="product-list"></div>
  <div class="actions">
    <button onclick="handleInquiry()">ğŸ” è©¢åƒ¹</button>
    <button onclick="handleAddToFavorites()">â• åŠ å…¥å¸¸ç”¨æ¸…å–®</button>
  </div>

  <script src="products.js"></script>
  <script>
    const selectedProducts = {};

    function renderProducts() {
      const container = document.getElementById("product-list");
      products.forEach((product, index) => {
        const html = `
          <div class="product">
            <label>
              <input type="checkbox" onchange="toggleProduct('${product.id}', this.checked)">
              ${product.name}
            </label>
            <select id="select-${product.id}">
              ${product.packages.map(p => `<option value="${p.unit}">${p.unit}</option>`).join('')}
            </select>
          </div>
        `;
        container.insertAdjacentHTML("beforeend", html);
      });
    }

    function toggleProduct(id, checked) {
      if (checked) {
        const unit = document.getElementById("select-" + id).value;
        selectedProducts[id] = unit;
      } else {
        delete selectedProducts[id];
      }
    }

    function handleInquiry() {
      const msg = Object.entries(selectedProducts).map(([id, unit]) => `- ${id}ï¼ˆ${unit}ï¼‰`).join("\n");
      alert("ä»¥ä¸‹æ˜¯è©¢åƒ¹å•†å“ï¼š\n" + msg);
    }

    function handleAddToFavorites() {
      const msg = Object.entries(selectedProducts).map(([id, unit]) => `- ${id}ï¼ˆ${unit}ï¼‰`).join("\n");
      alert("ä»¥ä¸‹å°‡åŠ å…¥å¸¸ç”¨æ¸…å–®ï¼š\n" + msg);
    }

    renderProducts();
  </script>
</body>
</html>